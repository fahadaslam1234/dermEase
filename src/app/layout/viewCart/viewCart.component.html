<div class="shop-banner">
  <div class="shop-content text-center p-4">
    <p class="text-4xl">DermEase</p>
    <br>
    <h1 class="text-4xl font-bold">CART</h1>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-lg-8 col-md-12 mb-4 rounded">
      <mat-card class="p-4">
        <mat-card-title class="p-2">Shopping Bag</mat-card-title>
        <div class="table-responsive">
          <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <!-- Product Column -->
            <ng-container matColumnDef="product">
              <th mat-header-cell *matHeaderCellDef class="product-column"> Product </th>
              <td mat-cell *matCellDef="let element" class="product-column">
                <div class="d-flex align-items-center">
                  <img [src]="element.product_image" alt="" class="product-image mr-2">
                  {{element.product_name}}
                </div>
              </td>
            </ng-container>

            <!-- Price Column -->
            <ng-container matColumnDef="price">
              <th mat-header-cell *matHeaderCellDef class="price-column"> Price </th>
              <td mat-cell *matCellDef="let element" class="price-column"> {{element.price | currency:'Rs '}} </td>
            </ng-container>

            <!-- Quantity Column -->
            <ng-container matColumnDef="quantity">
              <th mat-header-cell *matHeaderCellDef class="quantity-column" style="text-align: center;"> Quantity </th>
              <td mat-cell *matCellDef="let element" class="quantity-column">
                <div class="d-flex align-items-center quantity-controls">
                  <span (click)="removeFromCart(element)" class="quantity-btn">
                    <mat-icon class="removeIcon">remove</mat-icon>
                  </span>
                  <span class="mx-2">{{ element.quantity }}</span>
                  <span (click)="addToCart(element)" class="quantity-btn">
                    <mat-icon class="removeIcon">add</mat-icon>
                  </span>
                </div>
              </td>
            </ng-container>

            <!-- Subtotal Column -->
            <ng-container matColumnDef="subtotal">
              <th mat-header-cell *matHeaderCellDef class="subtotal-column"> Subtotal </th>
              <td mat-cell *matCellDef="let element" class="subtotal-column"> {{element.price * element.quantity | currency:'Rs '}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
        </div>
      </mat-card>
    </div>

    <div class="col-lg-4 col-md-12 bg-white shadow-md mb-8 rounded p-4 order-summary">
      <h2 class="text-xl font-bold mb-4">Cart Totals</h2>
      <mat-card-content>
        <div class="total_details mb-2">
          <span class="left-side">SUBTOTAL</span>
          <span class="right-side">{{ calculateSubtotal() | currency:'Rs ' }}</span>
        </div>
        <div class="total_details mb-2">
          <span class="left-side">ESTIMATED DELIVERY</span>
          <span class="right-side">4 days</span>
        </div>
        <div class="text-center mb-4">
          <p>Taxes and Shipping are calculated at Checkout.</p>
        </div>
        <hr class="center-diamond">
        <div class="total_details mb-2">
          <span class="left-side">Total</span>
          <span class="right-side">{{ calculateSubtotal () | currency:'Rs ' }}</span>
        </div>
        <button mat-raised-button class="w-full primary-button" (click)="checkout()">PROCEED TO CHECKOUT</button>
      </mat-card-content>
    </div>
  </div>
</div>
